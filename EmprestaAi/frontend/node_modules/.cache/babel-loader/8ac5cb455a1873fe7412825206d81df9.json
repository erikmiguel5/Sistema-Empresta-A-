{"ast":null,"code":"import _regeneratorRuntime from\"C:/wamp64/www/tb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/wamp64/www/tb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/wamp64/www/tb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/wamp64/www/tb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/wamp64/www/tb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/wamp64/www/tb/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{observer}from'mobx-react';import SubmitButton from'./stores/componentes/SubmitButton';import UserStore from'./stores/UserStore';import'./App.css';import Login from'./stores/componentes/Login';import CadastroForm from'./stores/componentes/CadastroForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){_classCallCheck(this,App);return _super.apply(this,arguments);}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/isLoggedIn',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;if(result&&result.success){UserStore.loading=false;UserStore.isLoggedIn=true;UserStore.email=result.email;}else{UserStore.loading=false;UserStore.isLoggedIn=false;}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);UserStore.loading=false;UserStore.isLoggedIn=false;case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"doLogout\",value:function(){var _doLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('/logout',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'}});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:result=_context2.sent;if(result&&result.success){UserStore.isLoggedIn=false;UserStore.email='';}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));function doLogout(){return _doLogout.apply(this,arguments);}return doLogout;}()},{key:\"render\",value:function render(){var _this=this;if(UserStore.loading){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:\"Loading, please wait ...\"})});}else{if(UserStore.isLoggedIn){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[\"Welcome \",UserStore.username,/*#__PURE__*/_jsx(SubmitButton,{text:'Logout',disabled:false,onClick:function onClick(){return _this.doLogout();}})]})});}if(UserStore.cadastrar){return/*#__PURE__*/_jsx(CadastroForm,{});}return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(Login,{})});}}}]);return App;}(React.Component);export default observer(App);","map":{"version":3,"sources":["C:/wamp64/www/tb/frontend/src/App.js"],"names":["React","observer","SubmitButton","UserStore","Login","CadastroForm","App","fetch","method","headers","res","json","result","success","loading","isLoggedIn","email","console","log","username","doLogout","cadastrar","Component"],"mappings":"60BAAA,MAAOA,CAAAA,KAAP,KAAyB,OAAzB,CACA,OAASC,QAAT,KAAyB,YAAzB,CACA,MAAOC,CAAAA,YAAP,KAAyB,mCAAzB,CACA,MAAOC,CAAAA,SAAP,KAAyB,oBAAzB,CACA,MAA0B,WAA1B,CACA,MAAOC,CAAAA,KAAP,KAAoB,4BAApB,CACA,MAAOC,CAAAA,YAAP,KAAyB,mCAAzB,C,2FAEMC,CAAAA,G,+TAEJ,wLAIoBC,CAAAA,KAAK,CAAC,aAAD,CAAgB,CACnCC,MAAM,CAAE,MAD2B,CAEnCC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAF0B,CAAhB,CAJzB,QAIQC,GAJR,qCAYuBA,CAAAA,GAAG,CAACC,IAAJ,EAZvB,QAYQC,MAZR,eAcI,GAAGA,MAAM,EAAIA,MAAM,CAACC,OAApB,CAA4B,CAC1BV,SAAS,CAACW,OAAV,CAAoB,KAApB,CACAX,SAAS,CAACY,UAAV,CAAuB,IAAvB,CACAZ,SAAS,CAACa,KAAV,CAAkBJ,MAAM,CAACI,KAAzB,CACD,CAJD,IAKI,CACFb,SAAS,CAACW,OAAV,CAAoB,KAApB,CACCX,SAAS,CAACY,UAAV,CAAuB,KAAvB,CACF,CAtBL,iFA2BIZ,SAAS,CAACW,OAAV,CAAoB,KAApB,CACAX,SAAS,CAACY,UAAV,CAAuB,KAAvB,CA5BJ,qE,sNAiCA,+LAIoBR,CAAAA,KAAK,CAAC,SAAD,CAAY,CAC/BC,MAAM,CAAE,MADuB,CAE/BC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAFsB,CAAZ,CAJzB,QAIQC,GAJR,uCAYuBA,CAAAA,GAAG,CAACC,IAAJ,EAZvB,QAYQC,MAZR,gBAcI,GAAGA,MAAM,EAAIA,MAAM,CAACC,OAApB,CAA4B,CAC1BV,SAAS,CAACY,UAAV,CAAuB,KAAvB,CACAZ,SAAS,CAACa,KAAV,CAAkB,EAAlB,CACD,CAjBL,qFAsBIC,OAAO,CAACC,GAAR,eAtBJ,uE,wGA2BA,iBAAQ,gBAEN,GAAGf,SAAS,CAACW,OAAb,CAAqB,CACnB,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,WAAf,sCADF,EADF,CAOD,CARD,IASI,CAEF,GAAGX,SAAS,CAACY,UAAb,CAAwB,CACtB,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,WAAf,sBACYZ,SAAS,CAACgB,QADtB,cAGE,KAAC,YAAD,EACE,IAAI,CAAE,QADR,CAEE,QAAQ,CAAE,KAFZ,CAGE,OAAO,CAAG,yBAAM,CAAA,KAAI,CAACC,QAAL,EAAN,EAHZ,EAHF,GADF,EADF,CAaD,CAED,GAAGjB,SAAS,CAACkB,SAAb,CAAuB,CACrB,mBACA,KAAC,YAAD,IADA,CAGD,CACD,mBACE,YAAK,SAAS,CAAC,WAAf,uBACI,KAAC,KAAD,IADJ,EADF,CAKD,CACF,C,iBAtGerB,KAAK,CAACsB,S,EAyGxB,cAAerB,CAAAA,QAAQ,CAACK,GAAD,CAAvB","sourcesContent":["import React        from 'react'\nimport { observer } from 'mobx-react'\nimport SubmitButton from './stores/componentes/SubmitButton'\nimport UserStore    from './stores/UserStore'\nimport                    './App.css'\nimport Login   from './stores/componentes/Login'\nimport CadastroForm from './stores/componentes/CadastroForm'\n\nclass App extends React.Component {\n\n  async componentDidMount() {\n\n    try {\n\n      let res = await fetch('/isLoggedIn', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n\n      let result = await res.json();\n\n      if(result && result.success){\n        UserStore.loading = false;\n        UserStore.isLoggedIn = true;\n        UserStore.email = result.email;\n      }\n      else{\n        UserStore.loading = false;\n         UserStore.isLoggedIn = false;\n      }\n\n    }\n\n    catch(e) {\n      UserStore.loading = false;\n      UserStore.isLoggedIn = false;\n    }\n\n  }\n\n  async doLogout() {\n\n    try {\n\n      let res = await fetch('/logout', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n\n      let result = await res.json();\n\n      if(result && result.success){\n        UserStore.isLoggedIn = false;\n        UserStore.email = '';\n      }\n\n    }\n\n    catch(e) {\n      console.log(e);\n    }\n\n  }\n\n  render(){\n\n    if(UserStore.loading){\n      return (\n        <div className=\"app\">\n          <div className='container'>\n            Loading, please wait ...\n          </div>\n        </div>\n      )\n    }\n    else{\n\n      if(UserStore.isLoggedIn){\n        return (\n          <div className=\"app\">\n            <div className='container'>\n              Welcome { UserStore.username }\n\n              <SubmitButton \n                text={'Logout'}\n                disabled={false}\n                onClick={ () => this.doLogout() }\n              />\n          </div>\n        </div>\n        );\n      }\n\n      if(UserStore.cadastrar){\n        return(\n        <CadastroForm />\n        );\n      }\n      return (\n        <div className=\"container\">\n            <Login />\n        </div>\n      );\n    }\n  }\n}\n\nexport default observer(App);\n"]},"metadata":{},"sourceType":"module"}